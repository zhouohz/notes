# Float

## 前言

页面布局的本质就是通过 CSS 摆放不同语义的 box

CSS 提供了三种传统布局方式（盒子的排列顺序）：标准流、浮动和定位

标准流就是默认的方式

只有标准流是不够的，比如，让两个盒子分别放置在同一行的两端或让一个盒子不随页面滚动（页面头部）等。前者或许能用标准流实现，不过很麻烦，而后者，是无法实现的。

最初只用于在成块的文本内浮动图像（字围效果），但现在它已成为在网页上布局的最常用工具 

在实际开发中的一个完整页面，通常都包含了这三种布局方式（移动端还有新的布局方式）

## 为什么需要浮动？

标准流中的 inline-block 存在缺陷，相邻块会有间隙，或者说行内块级元素的实际占位大于设置的宽高。这个间隙是不知道多大的，不好控制。不能让一组盒子在水平方向紧密排列

标准流中，在一行显示的盒子，永远都是从左至右排列，不能左边一个右边一个，通过margin将一个盒子挤到右边会非常的麻烦，数值不好测量，而且，行内块的默认间距会造成误差。

然而，以上问题都可以通过浮动轻松实现

**布局原则：纵向排列标准流，横向排列用浮动**

## 浮动的规则

```css
float: none(默认) | left | right;
```

使元素向边缘偏移，直到碰到父元素边缘或另一个浮动的元素，优先在一行显示，放不下了，就另起一行，从浮动的方向向另一个方向排列

## 浮动特性

1. 浮动元素会脱离标准流，不再保留原先的位置（由标准流中的盒子占用），覆盖在标准流的盒子之上。
2. 浮动元素会在一行内显示（紧紧贴在一起），且顶部对齐，父盒子装不下会新起一行
3. 具有行内块元素的特性。任何元素都可以浮动，且浮动之后都是行内块的特性
4. 浮动无法脱离父级元素的范围，浮动流的元素经常和标准流中的父级元素搭配使用。先用标准流中的父级元素在纵向排列好之后，再去让内部元素浮动实现水平排列

注意点：

如果前面的兄弟元素浮动了，后面的元素也要浮动，否则会被盖住

如果前面的兄弟元素没有浮动，后面的浮动元素会被挡住，紧挨着后面浮动，无法超过甚至盖住前面的兄弟元素。浮动的元素只会影响后面的标准流，对前面的标准流元素没有影响

如果前面的兄弟元素是行内元素，则会在一行显示，后面的元素左浮动会插在行内元素的前面

## 清除浮动

浮动的子元素无法撑开父元素的高度，如果父元素的高度塌陷了，那么父元素后面的兄弟元素就会相应的顶上去，被浮动的子元素覆盖掉，页面布局就乱套了。。。而直接给父元素设置一个高度又非常的不灵活，通常盒子的高度都是由子元素撑开的。

此时就需要一个方法，能满足让父元素高度不塌陷，同时还能根据内容自适应。其实就一个要求，让浮动的元素能够和标准流的子元素一样，能撑开父元素的高度就行了。

如此普遍的需求，CSS 肯定是提供了方法的，就是清除浮动

```css
clear: both | left | right;
/*
通常直接用both，清除两侧浮动元素的影响
给后面标准流中的兄弟元素添加
*/
```

清除浮动的本质就是清除浮动对标准流造成的影响，说白了就是可以撑开父盒子了

清除浮动的策略是**闭合浮动**，只让浮动在父元素内部受影响，不影响父元素外面的盒子

清除浮动的其他方法：

1. 额外标签法（隔墙法），是 W3C 的推荐做法

   就是在浮动元素的后面添加一个**块级兄弟元素**设置 `clear: both;` 清除掉前面浮动元素造成的影响。缺点：破坏了页面结构，新增了一个没有语义的盒子

2. 给父元素设置 `overflow` 属性

   其值有 hidden、auto 以及 scroll，规定当内容溢出时，是隐藏掉？出现滚动条？还是说直接显示一个滚动条，不论内容是否会溢出。通常用 hidden，缺点就是会隐藏溢出的内容，而滚动条又会影响美观

3. 给父元素设置 after 伪元素

   这是隔墙法的升级版。通过 CSS 伪元素模拟一个块级元素插入到父元素的最后位置，弥补了隔墙法的缺点。

   ```css
   .clearfix:after {
       content: "";
       display: block;
       clear: both;
   }
   .clearfix {
       /*兼容 IE6,7 的属性*/
       *zoom: 1;
   }
   ```

4. 给父元素设置双伪元素

   这是上面after伪元素法的升级版，在清除浮动的同时，还新增了解决嵌套元素上外边距合并的问题，两者原理一样

   ```css
   .clearfix:after,
   .clearfix:before {
       content: "";
       display: table
   }
   .clearfix:after {
       clear: both;
   }
   .clearfix {
       *zoom: 1;
   }
   ```

   这里最大的区别是 display 的值改为了 table，因为即使在子元素的上面添加一个空的块级元素，也无法将子元素和父元素的上外边距分开

   ```html
   <div>
       <!--<div></div> 无效-->
       <table></table>
       <div>
           bala bala
       </div>
   </div>
   ```

   而 table 标签跟 div 的一样，没有任何样式，不会影响页面布局，但能隔开嵌套元素的上外边距

常用的是后面三种，会有一些兼容的问题（理论上的）,但不需要理会